\doxysection{Core/\+Src/main.c File Reference}
\label{main_8c}\index{Core/Src/main.c@{Core/Src/main.c}}


Main source file of ultrasonic radar project.  


{\ttfamily \#include "{}main.\+h"{}}\newline
{\ttfamily \#include "{}dma.\+h"{}}\newline
{\ttfamily \#include "{}spi.\+h"{}}\newline
{\ttfamily \#include "{}tim.\+h"{}}\newline
{\ttfamily \#include "{}usart.\+h"{}}\newline
{\ttfamily \#include "{}gpio.\+h"{}}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include "{}usart\+\_\+custom.\+h"{}}\newline
{\ttfamily \#include "{}servo\+\_\+driver.\+h"{}}\newline
{\ttfamily \#include "{}ILI9341.\+h"{}}\newline
{\ttfamily \#include "{}GFX\+\_\+\+Color.\+h"{}}\newline
{\ttfamily \#include "{}fonts/font\+\_\+8x5.\+h"{}}\newline
{\ttfamily \#include "{}distance\+\_\+sensor.\+h"{}}\newline
{\ttfamily \#include "{}radar.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ System\+Clock\+\_\+\+Config} (void)
\begin{DoxyCompactList}\small\item\em System Clock Configuration. \end{DoxyCompactList}\item 
int \textbf{ main} (void)
\begin{DoxyCompactList}\small\item\em The application entry point. \end{DoxyCompactList}\item 
void \textbf{ draw\+Clear} ()
\item 
void \textbf{ draw\+Setup} ()
\item 
bool \textbf{ draw\+Setup\+Update} (double draw\+Scale, uint8\+\_\+t measure\+Scales\+Number)
\item 
void \textbf{ draw\+Measure} ()
\item 
void \textbf{ draw\+Measure\+Scale} ()
\item 
void \textbf{ HAL\+\_\+\+TIM\+\_\+\+Period\+Elapsed\+Callback} (\textbf{ TIM\+\_\+\+Handle\+Type\+Def} $\ast$htim)
\item 
void \textbf{ distance\+Sensor\+Trig\+On} (\textbf{ distance\+Sensor\+Struct} $\ast$sensor)
\item 
void \textbf{ distance\+Sensor\+Delay} (\textbf{ distance\+Sensor\+Struct} $\ast$sensor, uint32\+\_\+t delay)
\item 
void \textbf{ distance\+Sensor\+Trig\+Off} (\textbf{ distance\+Sensor\+Struct} $\ast$sensor)
\item 
void \textbf{ HAL\+\_\+\+GPIO\+\_\+\+EXTI\+\_\+\+Rising\+\_\+\+Callback} (uint16\+\_\+t GPIO\+\_\+\+Pin)
\item 
void \textbf{ HAL\+\_\+\+GPIO\+\_\+\+EXTI\+\_\+\+Falling\+\_\+\+Callback} (uint16\+\_\+t GPIO\+\_\+\+Pin)
\item 
void \textbf{ servo\+Driver\+Start\+Timer} (\textbf{ servo\+Driver\+Struct} $\ast$servo\+Driver)
\item 
void \textbf{ servo\+Driver\+Stop\+Timer} (\textbf{ servo\+Driver\+Struct} $\ast$servo\+Driver)
\item 
void \textbf{ servo\+Driver\+Set\+Pulse\+Width} (\textbf{ servo\+Driver\+Struct} $\ast$servo\+Driver)
\item 
void \textbf{ Error\+\_\+\+Handler} (void)
\begin{DoxyCompactList}\small\item\em This function is executed in case of error occurrence. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\textbf{ servo\+Driver\+Struct} \textbf{ servo\+PA6}
\item 
\textbf{ distance\+Sensor\+Struct} \textbf{ distance\+Sensor\+PA2}
\item 
\textbf{ radar\+Struct} \textbf{ radar}
\item 
\textbf{ draw\+Helper\+Struct} \textbf{ draw\+Helper}
\item 
\textbf{ UART\+\_\+\+Custom\+\_\+\+Handle\+Type\+Def} \textbf{ huart\+PC}
\item 
\textbf{ UART\+\_\+\+Queue} \textbf{ uart\+Queue\+PC}
\item 
\textbf{ DMA\+\_\+\+Handle\+Type\+Def} \textbf{ hdma\+\_\+usart1\+\_\+rx}
\item 
\textbf{ DMA\+\_\+\+Handle\+Type\+Def} \textbf{ hdma\+\_\+usart1\+\_\+tx}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Main source file of ultrasonic radar project. 

\begin{DoxyAuthor}{Author}
Kamil Ko≈õnik, Kacper Radzikowski 
\end{DoxyAuthor}
\begin{DoxySeeAlso}{See also}
{\texttt{ https\+://github.\+com/\+FRSH-\/0109/\+Radar\+\_\+\+Project\+\_\+\+PMIK\+\_\+2023Z}} 
\end{DoxySeeAlso}


\doxysubsection{Function Documentation}
\label{main_8c_a9b87431c23c2a12baa879f62f43bda05} 
\index{main.c@{main.c}!distanceSensorDelay@{distanceSensorDelay}}
\index{distanceSensorDelay@{distanceSensorDelay}!main.c@{main.c}}
\doxysubsubsection{distanceSensorDelay()}
{\footnotesize\ttfamily void distance\+Sensor\+Delay (\begin{DoxyParamCaption}\item[{\textbf{ distance\+Sensor\+Struct} $\ast$}]{sensor,  }\item[{uint32\+\_\+t}]{delay }\end{DoxyParamCaption})}

Function used to implement custom time delay of 1-\/2ms


\begin{DoxyParams}{Parameters}
{\em sensor} & pointer to \doxyref{distance\+Sensor\+Struct}{p.}{structdistance_sensor_struct} instance of sensor to be initialized \\
\hline
{\em delay} & time in ms to wait \\
\hline
\end{DoxyParams}
\label{main_8c_a902cb6ceee556ebfc81c8d1181d87cc9} 
\index{main.c@{main.c}!distanceSensorTrigOff@{distanceSensorTrigOff}}
\index{distanceSensorTrigOff@{distanceSensorTrigOff}!main.c@{main.c}}
\doxysubsubsection{distanceSensorTrigOff()}
{\footnotesize\ttfamily void distance\+Sensor\+Trig\+Off (\begin{DoxyParamCaption}\item[{\textbf{ distance\+Sensor\+Struct} $\ast$}]{sensor }\end{DoxyParamCaption})}

Function used to turn off trigger signal to the sensor


\begin{DoxyParams}{Parameters}
{\em sensor} & pointer to \doxyref{distance\+Sensor\+Struct}{p.}{structdistance_sensor_struct} instance of sensor to be initialized \\
\hline
\end{DoxyParams}
\label{main_8c_a6b42437e0654d88f5b7a68caa22a733c} 
\index{main.c@{main.c}!distanceSensorTrigOn@{distanceSensorTrigOn}}
\index{distanceSensorTrigOn@{distanceSensorTrigOn}!main.c@{main.c}}
\doxysubsubsection{distanceSensorTrigOn()}
{\footnotesize\ttfamily void distance\+Sensor\+Trig\+On (\begin{DoxyParamCaption}\item[{\textbf{ distance\+Sensor\+Struct} $\ast$}]{sensor }\end{DoxyParamCaption})}

Function used to turn on trigger signal to the sensor


\begin{DoxyParams}{Parameters}
{\em sensor} & pointer to \doxyref{distance\+Sensor\+Struct}{p.}{structdistance_sensor_struct} instance of sensor to be initialized \\
\hline
\end{DoxyParams}
\label{main_8c_a753dcda9075115cc1c781e4332085f84} 
\index{main.c@{main.c}!drawClear@{drawClear}}
\index{drawClear@{drawClear}!main.c@{main.c}}
\doxysubsubsection{drawClear()}
{\footnotesize\ttfamily void draw\+Clear (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\label{main_8c_ab5b93ed998b46e745b6713b6d7a27e32} 
\index{main.c@{main.c}!drawMeasure@{drawMeasure}}
\index{drawMeasure@{drawMeasure}!main.c@{main.c}}
\doxysubsubsection{drawMeasure()}
{\footnotesize\ttfamily void draw\+Measure (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\label{main_8c_af9f0ac13160d4a1b3eb13b6a0fa76502} 
\index{main.c@{main.c}!drawMeasureScale@{drawMeasureScale}}
\index{drawMeasureScale@{drawMeasureScale}!main.c@{main.c}}
\doxysubsubsection{drawMeasureScale()}
{\footnotesize\ttfamily void draw\+Measure\+Scale (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\label{main_8c_aedda947c024e77ba1f14c739913870bd} 
\index{main.c@{main.c}!drawSetup@{drawSetup}}
\index{drawSetup@{drawSetup}!main.c@{main.c}}
\doxysubsubsection{drawSetup()}
{\footnotesize\ttfamily void draw\+Setup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\label{main_8c_ab3557cb07835dec370fd8b7855343aae} 
\index{main.c@{main.c}!drawSetupUpdate@{drawSetupUpdate}}
\index{drawSetupUpdate@{drawSetupUpdate}!main.c@{main.c}}
\doxysubsubsection{drawSetupUpdate()}
{\footnotesize\ttfamily bool draw\+Setup\+Update (\begin{DoxyParamCaption}\item[{double}]{draw\+Scale,  }\item[{uint8\+\_\+t}]{measure\+Scales\+Number }\end{DoxyParamCaption})}

\label{main_8c_a1730ffe1e560465665eb47d9264826f9} 
\index{main.c@{main.c}!Error\_Handler@{Error\_Handler}}
\index{Error\_Handler@{Error\_Handler}!main.c@{main.c}}
\doxysubsubsection{Error\_Handler()}
{\footnotesize\ttfamily void Error\+\_\+\+Handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



This function is executed in case of error occurrence. 


\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}
\label{main_8c_a840291bc02cba5474a4cb46a9b9566fe} 
\index{main.c@{main.c}!main@{main}}
\index{main@{main}!main.c@{main.c}}
\doxysubsubsection{main()}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



The application entry point. 


\begin{DoxyRetVals}{Return values}
{\em int} & \\
\hline
\end{DoxyRetVals}
$<$ Init of display

$<$ Init of servo and sensor

$<$ Custom uart init

$<$ Radar init

$<$ Radar measure start

$<$ Radar servo movement start

$<$ Draw\+Helper struct init

$<$ Receiving data in uart queue

$<$ Transmitting data from uart queue

$<$ Drawing radar\textquotesingle{}s measure

$<$ Drawing measure\textquotesingle{}s scale\label{main_8c_aa8a4bdef9b3e742a5e225dd29a804db6} 
\index{main.c@{main.c}!servoDriverSetPulseWidth@{servoDriverSetPulseWidth}}
\index{servoDriverSetPulseWidth@{servoDriverSetPulseWidth}!main.c@{main.c}}
\doxysubsubsection{servoDriverSetPulseWidth()}
{\footnotesize\ttfamily void servo\+Driver\+Set\+Pulse\+Width (\begin{DoxyParamCaption}\item[{\textbf{ servo\+Driver\+Struct} $\ast$}]{servo\+Driver }\end{DoxyParamCaption})}

Function for setting pulse width from struct into timer instance


\begin{DoxyParams}{Parameters}
{\em servo\+Driver} & pointer to \doxyref{servo\+Driver\+Struct}{p.}{structservo_driver_struct} struct \\
\hline
\end{DoxyParams}
\label{main_8c_a3a027ed11a1051d0c899706817c68e37} 
\index{main.c@{main.c}!servoDriverStartTimer@{servoDriverStartTimer}}
\index{servoDriverStartTimer@{servoDriverStartTimer}!main.c@{main.c}}
\doxysubsubsection{servoDriverStartTimer()}
{\footnotesize\ttfamily void servo\+Driver\+Start\+Timer (\begin{DoxyParamCaption}\item[{\textbf{ servo\+Driver\+Struct} $\ast$}]{servo\+Driver }\end{DoxyParamCaption})}

Function for starting timer paired with certain servo struct


\begin{DoxyParams}{Parameters}
{\em servo\+Driver} & pointer to \doxyref{servo\+Driver\+Struct}{p.}{structservo_driver_struct} struct \\
\hline
\end{DoxyParams}
\label{main_8c_a9644009cc702a14f3a480ad472ee4d6a} 
\index{main.c@{main.c}!servoDriverStopTimer@{servoDriverStopTimer}}
\index{servoDriverStopTimer@{servoDriverStopTimer}!main.c@{main.c}}
\doxysubsubsection{servoDriverStopTimer()}
{\footnotesize\ttfamily void servo\+Driver\+Stop\+Timer (\begin{DoxyParamCaption}\item[{\textbf{ servo\+Driver\+Struct} $\ast$}]{servo\+Driver }\end{DoxyParamCaption})}

Function for stopping timer paired with certain servo struct


\begin{DoxyParams}{Parameters}
{\em servo\+Driver} & pointer to \doxyref{servo\+Driver\+Struct}{p.}{structservo_driver_struct} struct \\
\hline
\end{DoxyParams}
\label{main_8c_a70af21c671abfcc773614a9a4f63d920} 
\index{main.c@{main.c}!SystemClock\_Config@{SystemClock\_Config}}
\index{SystemClock\_Config@{SystemClock\_Config}!main.c@{main.c}}
\doxysubsubsection{SystemClock\_Config()}
{\footnotesize\ttfamily void System\+Clock\+\_\+\+Config (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



System Clock Configuration. 


\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}
Configure the main internal regulator output voltage

Initializes the RCC Oscillators according to the specified parameters in the \doxyref{RCC\+\_\+\+Osc\+Init\+Type\+Def}{p.}{struct_r_c_c___osc_init_type_def} structure.

Initializes the CPU, AHB and APB buses clocks

\doxysubsection{Variable Documentation}
\label{main_8c_a94c36cf45267b6e4d4ec02ad2438c2da} 
\index{main.c@{main.c}!distanceSensorPA2@{distanceSensorPA2}}
\index{distanceSensorPA2@{distanceSensorPA2}!main.c@{main.c}}
\doxysubsubsection{distanceSensorPA2}
{\footnotesize\ttfamily \textbf{ distance\+Sensor\+Struct} distance\+Sensor\+PA2}

Sensor conncted to PA2 pin structure \label{main_8c_adf53ce83636ba14bf6b66c48aae16e49} 
\index{main.c@{main.c}!drawHelper@{drawHelper}}
\index{drawHelper@{drawHelper}!main.c@{main.c}}
\doxysubsubsection{drawHelper}
{\footnotesize\ttfamily \textbf{ draw\+Helper\+Struct} draw\+Helper}

Draw helper structure \label{main_8c_a34251392f0d5e2461e3aef615918c235} 
\index{main.c@{main.c}!hdma\_usart1\_rx@{hdma\_usart1\_rx}}
\index{hdma\_usart1\_rx@{hdma\_usart1\_rx}!main.c@{main.c}}
\doxysubsubsection{hdma\_usart1\_rx}
{\footnotesize\ttfamily \textbf{ DMA\+\_\+\+Handle\+Type\+Def} hdma\+\_\+usart1\+\_\+rx\hspace{0.3cm}{\ttfamily [extern]}}

\label{main_8c_a5af94ab36bfe698db3e6beea96d10a90} 
\index{main.c@{main.c}!hdma\_usart1\_tx@{hdma\_usart1\_tx}}
\index{hdma\_usart1\_tx@{hdma\_usart1\_tx}!main.c@{main.c}}
\doxysubsubsection{hdma\_usart1\_tx}
{\footnotesize\ttfamily \textbf{ DMA\+\_\+\+Handle\+Type\+Def} hdma\+\_\+usart1\+\_\+tx\hspace{0.3cm}{\ttfamily [extern]}}

\label{main_8c_aa8f73ccd6c2e2b10c7ee326ad9b700ce} 
\index{main.c@{main.c}!huartPC@{huartPC}}
\index{huartPC@{huartPC}!main.c@{main.c}}
\doxysubsubsection{huartPC}
{\footnotesize\ttfamily \textbf{ UART\+\_\+\+Custom\+\_\+\+Handle\+Type\+Def} huart\+PC}

Cusomt uart connected to PC structure \label{main_8c_a9f3a2a5f24724aadbb21c4a8e74b5a09} 
\index{main.c@{main.c}!radar@{radar}}
\index{radar@{radar}!main.c@{main.c}}
\doxysubsubsection{radar}
{\footnotesize\ttfamily \textbf{ radar\+Struct} radar}

Radar structure \label{main_8c_a4e519356505feeb7b9659dcdc97161c0} 
\index{main.c@{main.c}!servoPA6@{servoPA6}}
\index{servoPA6@{servoPA6}!main.c@{main.c}}
\doxysubsubsection{servoPA6}
{\footnotesize\ttfamily \textbf{ servo\+Driver\+Struct} servo\+PA6}

Servo conncted to PA6 pin structure \label{main_8c_a730b36042999ad73efb22a259d91845a} 
\index{main.c@{main.c}!uartQueuePC@{uartQueuePC}}
\index{uartQueuePC@{uartQueuePC}!main.c@{main.c}}
\doxysubsubsection{uartQueuePC}
{\footnotesize\ttfamily \textbf{ UART\+\_\+\+Queue} uart\+Queue\+PC}

Uart connected to PC Queue 